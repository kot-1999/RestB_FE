doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title Manage Staff - RestBoo
    link(rel="stylesheet", href="/assets/css/styles.css")
  
  body(data-requires-auth)
    header
      include ../partials/header
    
    main
      .staff-container
        .staff-header
          h1 Manage Staff
          p Add and manage restaurant staff members
        
        .staff-actions
          button.btn-primary(id="addStaffBtn") Add Staff Member
          button.btn-secondary(id="exportStaffBtn") Export Staff
          button.btn-secondary(id="bulkInviteBtn") Bulk Invite
        
        .staff-filters
          .filter-row
            .search-bar
              input(type="text" id="staffSearch" placeholder="Search staff by name, email...")
              button.btn-secondary(id="searchBtn") Search
            .filter-group
              label(for="roleFilter") Role
              select(id="roleFilter")
                option(value="") All Roles
                option(value="superAdmin") Super Admin
                option(value="adminStaff") Admin Staff
            .filter-group
              label(for="statusFilter") Status
              select(id="statusFilter")
                option(value="") All Status
                option(value="active") Active
                option(value="inactive") Inactive
                option(value="pending") Pending
        
        .staff-list
          .loading-indicator(id="staffLoading")
            p Loading staff members...
        
        .empty-state(id="noStaff" style="display: none;")
          .empty-icon ðŸ‘¥
          h3 No Staff Members Found
          p Start by adding your first staff member.
          button.btn-primary(id="addFirstStaffBtn") Add Staff Member
    
    // Staff Modal
    .modal(id="staffModal" style="display: none;")
      .modal-content
        .modal-header
          h2(id="modalTitle") Add Staff Member
          button.close-btn(id="closeModalBtn") Ã—
        
        .modal-body
          .staff-form
            .form-row
              .form-group
                label(for="firstName") First Name *
                input(type="text" id="firstName" name="firstName" required placeholder="Enter first name")
              .form-group
                label(for="lastName") Last Name *
                input(type="text" id="lastName" name="lastName" required placeholder="Enter last name")
            
            .form-group
              label(for="email") Email *
              input(type="email" id="email" name="email" required placeholder="Enter email address")
            
            .form-group
              label(for="phone") Phone
              input(type="tel" id="phone" name="phone" placeholder="Enter phone number")
            
            .form-group
              label(for="role") Role *
              select(id="role" name="role" required)
                option(value="") Select Role
                option(value="adminStaff") Admin Staff
                option(value="superAdmin") Super Admin
            
            .form-group
              label(for="assignedRestaurants") Assigned Restaurants
              select(id="assignedRestaurants" name="assignedRestaurants" multiple)
                option(value="") Select restaurants (leave empty for all)
                // Restaurant options will be loaded dynamically
            
            .form-group
              label(for="permissions") Permissions
              .permissions-grid
                .permission-item
                  input(type="checkbox" id="manageBookings" value="manageBookings")
                  label(for="manageBookings") Manage Bookings
                .permission-item
                  input(type="checkbox" id="viewReports" value="viewReports")
                  label(for="viewReports") View Reports
                .permission-item
                  input(type="checkbox" id="manageStaff" value="manageStaff")
                  label(for="manageStaff") Manage Staff
                .permission-item
                  input(type="checkbox" id="manageRestaurants" value="manageRestaurants")
                  label(for="manageRestaurants") Manage Restaurants
            
            .form-actions
              button.btn-primary(id="saveStaffBtn") Save Staff Member
              button.btn-secondary(id="cancelStaffBtn") Cancel
    
    // Staff Details Modal
    .modal(id="staffDetailsModal" style="display: none;")
      .modal-content
        .modal-header
          h2 Staff Details
          button.close-btn(id="closeDetailsModalBtn") Ã—
        
        .modal-body
          .staff-details
            .detail-section
              h3 Personal Information
              .detail-item
                strong Name:
                span(id="detailStaffName") Loading...
              .detail-item
                strong Email:
                span(id="detailStaffEmail") Loading...
              .detail-item
                strong Phone:
                span(id="detailStaffPhone") Loading...
              .detail-item
                strong Role:
                span(id="detailStaffRole") Loading...
              .detail-item
                strong Status:
                span.staff-status(id="detailStaffStatus") Loading...
            
            .detail-section
              h3 Assignment & Performance
              .detail-item
                strong Assigned Restaurants:
                span(id="detailAssignedRestaurants") Loading...
              .detail-item
                strong Bookings Managed:
                span(id="detailBookingsManaged") 0
              .detail-item
                strong Last Login:
                span(id="detailLastLogin") Never
              .detail-item
                strong Account Created:
                span(id="detailAccountCreated") Loading...
            
            .detail-section
              h3 Actions
              .staff-actions
                button.btn-primary(id="editStaffBtn") Edit Staff
                button.btn-secondary(id="resetPasswordBtn") Reset Password
                button.btn-warning(id="toggleStatusBtn") Deactivate
                button.btn-danger(id="deleteStaffBtn") Delete Staff
    
    include ../partials/footer
    
    script(src="/assets/js/config.js")
    script(src="/assets/js/utils/storage.js")
    script(src="/assets/js/utils/ui.js")
    script(src="/assets/js/utils/api.js")
    script(src="/assets/js/utils/auth.js")
    script(src="/assets/js/utils/access-control.js")
    script(src="/assets/js/main.js")
    script(src="/assets/js/admin-staff.js")
